name: Generate Profile README
on:
  push:
    branches: [main]
  schedule:
    - cron: "0 */6 * * *"
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          
      - name: Generate GitHub metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          user: dacrab
          filename: github-metrics.svg
          template: classic
          base: header, activity, community, repositories
          config_timezone: Europe/Athens
          plugin_isocalendar: yes
          plugin_languages: yes
          plugin_activity: yes
          plugin_lines: yes
          
      - name: Create static README content
        run: |
          cat > README.md << 'EOF'
          ## Hi there üëã I'm Vaggelis Kavouras
          
          [![](https://readme-typing-svg.herokuapp.com/?lines=Welcome+to+my+GitHub+profile!;I'm+a+passionate+solo+developer;Always+learning+new+things&font=Fira%40Code&center=true)](https://github.com/dacrab)
          
          ### About Me
          
          I'm a solo developer from üá¨üá∑ Greece with a passion for building modern web apps. I started with C and static websites ‚Äî and now I create type-safe, full-stack, real-time apps using cutting-edge tools like Supabase, Next.js, and Tailwind CSS.
          
          I enjoy clean design, scalable code, and collaborating with like-minded devs. Always learning. Always shipping.
          üåç Based in Greece
          
          ### üõ†Ô∏è Skills
          
          [![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)](https://supabase.com/)
          [![Next.js](https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=next.js&logoColor=white)](https://nextjs.org/)
          [![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)](https://reactjs.org/)
          [![Vite](https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white)](https://vitejs.dev/)
          [![shadcn/ui](https://img.shields.io/badge/shadcn/ui-000000?style=for-the-badge&logo=shadcn&logoColor=white)](https://ui.shadcn.com/)
          [![Tailwind CSS](https://img.shields.io/badge/TailwindCSS-06B6D4?style=for-the-badge&logo=tailwind-css&logoColor=white)](https://tailwindcss.com/)
          [![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=for-the-badge&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
          
          ### üöÄ Featured Projects
          
          | Project | Description | Tech Stack |
          |---------|-------------|------------|
          | üéØ [**Argicon**](https://argicon.gr) | Sleek architecture studio site with multilingual support and Framer Motion animations | Next.js, Framer Motion, i18n |
          | üß± [**DesignDash**](https://designdash.gr) | Bilingual architecture portfolio with light/dark mode | Next.js, Tailwind CSS |
          | üßë‚Äçüíº [**clubOS**](https://clubos.vercel.app) | POS and booking system for sports facilities with real-time data, RBAC, and analytics | [Repo](https://github.com/dacrab/clubos) |
          | üåê [**Portfolio**](https://dacrab.github.io/) | Personal developer portfolio | Next.js, TypeScript, TailwindCSS [Repo](https://github.com/dacrab/portfolio) |
          
          ### üìä GitHub Stats
          
          <div align="center">
          
          ![GitHub Metrics](github-metrics.svg)
          
          </div>
          
          <div align="center">
          
          [![GitHub stats](https://github-readme-stats.vercel.app/api?username=dacrab&show_icons=true&theme=tokyonight&hide_border=true&bg_color=0D1117)](https://github.com/dacrab)
          
          [![GitHub Streak](https://github-readme-streak-stats.herokuapp.com/?user=dacrab&theme=tokyonight&hide_border=true&background=0D1117)](https://github.com/dacrab)
          
          [![Top Languages](https://github-readme-stats.vercel.app/api/top-langs/?username=dacrab&layout=compact&theme=tokyonight&hide_border=true&bg_color=0D1117)](https://github.com/dacrab)
          
          [![Activity Graph](https://github-readme-activity-graph.vercel.app/graph?username=dacrab&theme=react-dark&hide_border=true&bg_color=0D1117)](https://github.com/dacrab)
          
          </div>
          
          ### ü§ù Let's Connect!
          
          <div align="center">
          
          [![Instagram](https://img.shields.io/badge/Instagram-E4405F?style=for-the-badge&logo=instagram&logoColor=white)](https://www.instagram.com/killcrb/)
          [![GitHub](https://img.shields.io/badge/GitHub-100000?style=for-the-badge&logo=github&logoColor=white)](https://github.com/dacrab)
          [![LinkedIn](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/vkavouras/)
          
          </div>
          
          ---
          
          <div align="center">
          
          **‚ú® Always learning, always building, always shipping! ‚ú®**
          
          *Last updated: $(date '+%B %d, %Y')*
          
          </div>
          EOF
          
      - name: Check generated files
        run: |
          echo "=== Generated files ==="
          ls -la *.svg *.md || echo "No SVG/MD files found"
          echo "=== Current directory ==="
          ls -la
          
      - name: Commit and push changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: 'üîÑ Auto-update profile README'
          file_pattern: 'README.md github-metrics.svg'
          commit_user_name: 'profile-readme-bot'
          commit_user_email: 'actions@github.com'
          skip_dirty_check: true
